/*
 *  embed-js - v3.7.4
 *  A JavaScript plugin that analyses the string and embeds emojis, media, tweets, code and services.
 *  http://riteshkr.com/embed.js
 *
 *  Made by Ritesh Kumar
 *  Under MIT License
 */
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.EmbedJS=b()}(this,function(){"use strict";function a(a,b){return a.substr(0,b-1)+(a.length>b?"...":"")}function b(a){return-1===a.indexOf("//")?"//"+a:a}function c(a,b){for(var d in b)b[d]&&b[d].constructor===Object?(a[d]=a[d]||{},c(a[d],b[d])):a[d]=b[d];return a}function d(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function e(a){return a.sort(function(a,b){return a.index-b.index})}function f(a,b){for(var c=e(b),d=0;d<c.length;d++)a+=" "+c[d].text;return a}function g(a,b){return a.exec(b)}function h(a,b){return-1==a.excludeEmbed.indexOf(b)&&"all"!==a.excludeEmbed}function i(a,b){return-1==a.inlineEmbed.includes(b)&&"all"!==a.inlineEmbed}function j(a){var b={width:a.videoWidth,height:a.videoHeight};if(a.videoHeight&&a.videoWidth)return b;if(a.videoHeight)return a.videoWidth=b.width=a.videoHeight/3*4,b;if(a.videoWidth)return a.videoHeight=b.height=b.width/4*3,b;var c,d=(c=[800,600],b.width=c[0],b.height=c[1],c),e=y.slicedToArray(d,2);return a.videoWidth=e[0],a.videoHeight=e[1],b}function k(a){if(null===a||"object"!==("undefined"==typeof a?"undefined":y["typeof"](a)))return a;var b=a.constructor();for(var c in a)b[c]=k(a[c]);return b}function l(){return/((href|src)=["']|)(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])|(?:https?:\/\/)?(?:(?:0rz\.tw)|(?:1link\.in)|(?:1url\.com)|(?:2\.gp)|(?:2big\.at)|(?:2tu\.us)|(?:3\.ly)|(?:307\.to)|(?:4ms\.me)|(?:4sq\.com)|(?:4url\.cc)|(?:6url\.com)|(?:7\.ly)|(?:a\.gg)|(?:a\.nf)|(?:aa\.cx)|(?:abcurl\.net)|(?:ad\.vu)|(?:adf\.ly)|(?:adjix\.com)|(?:afx\.cc)|(?:all\.fuseurl.com)|(?:alturl\.com)|(?:amzn\.to)|(?:ar\.gy)|(?:arst\.ch)|(?:atu\.ca)|(?:azc\.cc)|(?:b23\.ru)|(?:b2l\.me)|(?:bacn\.me)|(?:bcool\.bz)|(?:binged\.it)|(?:bit\.ly)|(?:buff\.ly)|(?:bizj\.us)|(?:bloat\.me)|(?:bravo\.ly)|(?:bsa\.ly)|(?:budurl\.com)|(?:canurl\.com)|(?:chilp\.it)|(?:chzb\.gr)|(?:cl\.lk)|(?:cl\.ly)|(?:clck\.ru)|(?:cli\.gs)|(?:cliccami\.info)|(?:clickthru\.ca)|(?:clop\.in)|(?:conta\.cc)|(?:cort\.as)|(?:cot\.ag)|(?:crks\.me)|(?:ctvr\.us)|(?:cutt\.us)|(?:dai\.ly)|(?:decenturl\.com)|(?:dfl8\.me)|(?:digbig\.com)|(?:digg\.com)|(?:disq\.us)|(?:dld\.bz)|(?:dlvr\.it)|(?:do\.my)|(?:doiop\.com)|(?:dopen\.us)|(?:easyuri\.com)|(?:easyurl\.net)|(?:eepurl\.com)|(?:eweri\.com)|(?:fa\.by)|(?:fav\.me)|(?:fb\.me)|(?:fbshare\.me)|(?:ff\.im)|(?:fff\.to)|(?:fire\.to)|(?:firsturl\.de)|(?:firsturl\.net)|(?:flic\.kr)|(?:flq\.us)|(?:fly2\.ws)|(?:fon\.gs)|(?:freak\.to)|(?:fuseurl\.com)|(?:fuzzy\.to)|(?:fwd4\.me)|(?:fwib\.net)|(?:g\.ro.lt)|(?:gizmo\.do)|(?:gl\.am)|(?:go\.9nl.com)|(?:go\.ign.com)|(?:go\.usa.gov)|(?:goo\.gl)|(?:goshrink\.com)|(?:gurl\.es)|(?:hex\.io)|(?:hiderefer\.com)|(?:hmm\.ph)|(?:href\.in)|(?:hsblinks\.com)|(?:htxt\.it)|(?:huff\.to)|(?:hulu\.com)|(?:hurl\.me)|(?:hurl\.ws)|(?:icanhaz\.com)|(?:idek\.net)|(?:ilix\.in)|(?:is\.gd)|(?:its\.my)|(?:ix\.lt)|(?:j\.mp)|(?:jijr\.com)|(?:kl\.am)|(?:klck\.me)|(?:korta\.nu)|(?:krunchd\.com)|(?:l9k\.net)|(?:lat\.ms)|(?:liip\.to)|(?:liltext\.com)|(?:linkbee\.com)|(?:linkbun\.ch)|(?:liurl\.cn)|(?:ln-s\.net)|(?:ln-s\.ru)|(?:lnk\.gd)|(?:lnk\.ms)|(?:lnkd\.in)|(?:lnkurl\.com)|(?:lru\.jp)|(?:lt\.tl)|(?:lurl\.no)|(?:macte\.ch)|(?:mash\.to)|(?:merky\.de)|(?:migre\.me)|(?:miniurl\.com)|(?:minurl\.fr)|(?:mke\.me)|(?:moby\.to)|(?:moourl\.com)|(?:mrte\.ch)|(?:myloc\.me)|(?:myurl\.in)|(?:n\.pr)|(?:nbc\.co)|(?:nblo\.gs)|(?:nn\.nf)|(?:not\.my)|(?:notlong\.com)|(?:nsfw\.in)|(?:nutshellurl\.com)|(?:nxy\.in)|(?:nyti\.ms)|(?:o-x\.fr)|(?:oc1\.us)|(?:om\.ly)|(?:omf\.gd)|(?:omoikane\.net)|(?:on\.cnn.com)|(?:on\.mktw.net)|(?:onforb\.es)|(?:orz\.se)|(?:ow\.ly)|(?:ping\.fm)|(?:pli\.gs)|(?:pnt\.me)|(?:politi\.co)|(?:post\.ly)|(?:pp\.gg)|(?:profile\.to)|(?:ptiturl\.com)|(?:pub\.vitrue.com)|(?:qlnk\.net)|(?:qte\.me)|(?:qu\.tc)|(?:qy\.fi)|(?:r\.im)|(?:rb6\.me)|(?:read\.bi)|(?:readthis\.ca)|(?:reallytinyurl\.com)|(?:redir\.ec)|(?:redirects\.ca)|(?:redirx\.com)|(?:retwt\.me)|(?:ri\.ms)|(?:rickroll\.it)|(?:riz\.gd)|(?:rt\.nu)|(?:ru\.ly)|(?:rubyurl\.com)|(?:rurl\.org)|(?:rww\.tw)|(?:s4c\.in)|(?:s7y\.us)|(?:safe\.mn)|(?:sameurl\.com)|(?:sdut\.us)|(?:shar\.es)|(?:shink\.de)|(?:shorl\.com)|(?:short\.ie)|(?:short\.to)|(?:shortlinks\.co.uk)|(?:shorturl\.com)|(?:shout\.to)|(?:show\.my)|(?:shrinkify\.com)|(?:shrinkr\.com)|(?:shrt\.fr)|(?:shrt\.st)|(?:shrten\.com)|(?:shrunkin\.com)|(?:simurl\.com)|(?:slate\.me)|(?:smallr\.com)|(?:smsh\.me)|(?:smurl\.name)|(?:sn\.im)|(?:snipr\.com)|(?:snipurl\.com)|(?:snurl\.com)|(?:sp2\.ro)|(?:spedr\.com)|(?:srnk\.net)|(?:srs\.li)|(?:starturl\.com)|(?:su\.pr)|(?:surl\.co.uk)|(?:surl\.hu)|(?:t\.cn)|(?:t\.co)|(?:t\.lh.com)|(?:ta\.gd)|(?:tbd\.ly)|(?:tcrn\.ch)|(?:tgr\.me)|(?:tgr\.ph)|(?:tighturl\.com)|(?:tiniuri\.com)|(?:tiny\.cc)|(?:tiny\.ly)|(?:tiny\.pl)|(?:tinylink\.in)|(?:tinyuri\.ca)|(?:tinyurl\.com)|(?:tl\.gd)|(?:tmi\.me)|(?:tnij\.org)|(?:tnw\.to)|(?:tny\.com)|(?:to\.ly)|(?:togoto\.us)|(?:totc\.us)|(?:toysr\.us)|(?:tpm\.ly)|(?:tr\.im)|(?:tra\.kz)|(?:trunc\.it)|(?:twhub\.com)|(?:twirl\.at)|(?:twitclicks\.com)|(?:twitterurl\.net)|(?:twitterurl\.org)|(?:twiturl\.de)|(?:twurl\.cc)|(?:twurl\.nl)|(?:u\.mavrev.com)|(?:u\.nu)|(?:u76\.org)|(?:ub0\.cc)|(?:ulu\.lu)|(?:updating\.me)|(?:ur1\.ca)|(?:url\.az)|(?:url\.co.uk)|(?:url\.ie)|(?:url360\.me)|(?:url4\.eu)|(?:urlborg\.com)|(?:urlbrief\.com)|(?:urlcover\.com)|(?:urlcut\.com)|(?:urlenco\.de)|(?:urli\.nl)|(?:urls\.im)|(?:urlshorteningservicefortwitter\.com)|(?:urlx\.ie)|(?:urlzen\.com)|(?:usat\.ly)|(?:use\.my)|(?:vb\.ly)|(?:vgn\.am)|(?:vl\.am)|(?:vm\.lc)|(?:w55\.de)|(?:wapo\.st)|(?:wapurl\.co.uk)|(?:wipi\.es)|(?:wp\.me)|(?:x\.vu)|(?:xr\.com)|(?:xrl\.in)|(?:xrl\.us)|(?:xurl\.es)|(?:xurl\.jp)|(?:y\.ahoo.it)|(?:yatuc\.com)|(?:ye\.pe)|(?:yep\.it)|(?:yfrog\.com)|(?:yhoo\.it)|(?:yiyd\.com)|(?:youtu\.be)|(?:yuarel\.com)|(?:z0p\.de)|(?:zi\.ma)|(?:zi\.mu)|(?:zipmyurl\.com)|(?:zud\.me)|(?:zurl\.ws)|(?:zz\.gd)|(?:zzang\.kr)|(?:›\.ws)|(?:✩\.ws)|(?:✿\.ws)|(?:❥\.ws)|(?:➔\.ws)|(?:➞\.ws)|(?:➡\.ws)|(?:➨\.ws)|(?:➯\.ws)|(?:➹\.ws)|(?:➽\.ws))\/[a-z0-9]*/gi}function m(a){if(a.customVideoClickHandler)return a.videoClickHandler(a,n);for(var b=document.getElementsByClassName(a.videoClickClass),c=0;c<b.length;c++)b[c].onclick=function(){a.onVideoShow();var b=this.getAttribute("data-ejs-url")+"?autoplay=true";this.parentNode.parentNode.innerHTML=n(b,a)}}function n(a,b){var c=j(b);return b.template.vimeo(a,c,b)||b.template.youtube(a,c,b)}function o(a,b,c,d){return"vimeo"===a.host?d.template.detailsVimeo(a,b,c,d):"youtube"===a.host?d.template.detailsYoutube(a,b,c,d):void 0}function p(a){var b=j(a);if(a.videojsOptions.width=b.width,a.videojsOptions.height=b.height,a.videoJS){if(!window.videojs)throw new ReferenceError("You have enabled videojs but you haven't loaded the library.Find it at http://videojs.com/");for(var c=a.input.getElementsByClassName("ejs-video-js"),d=0;d<c.length;d++)videojs(c[d],a.videojsOptions,function(){return a.videojsCallback()})}}function q(a){for(var b=document.getElementsByClassName(a),c=0;c<b.length;c++)b[c].onclick=null}function r(a,b,c){var d=(a.options.link?c[0].slice(0,-4):c[0])||c[1];return-1!==a.options.served.indexOf(d)?Promise.resolve(null):new Promise(function(e){b(a,c,d).then(function(b){return b?(a.options.served.push(d),void e(b)):e()})})}function s(a,b){for(var c=a.options.link?new RegExp("([^>]*"+a.regex.source+")</a>","gi"):new RegExp("([^\\s]*"+a.regex.source+")","gi"),d=void 0,e=[],f=[];null!==(d=g(c,a.output));)e.push(d),f.push(r(a,b,d));return new Promise(function(b){g.length?Promise.all(f).then(function(d){var e=0;a.output=a.output.replace(c,function(b){return a.options.link?a.options.inlineText?b+d[e++]:d[e]+"</a>":a.options.inlineText?b+d[e++]:d[e]}),b(a.output)}):b(a.output)})}function t(a,b,c){var d=c[0];if(-1!==!a.options.served.indexOf(d))return new Promise(function(e){b(a,c,d,!0).then(function(b){b||e(),a.options.served.push(d),a.embeds.push({text:b,index:c.index}),e()})})}function u(a,b){for(var c=void 0,d=[],e=[];null!==(c=g(a.regex,a.input));)d.push(c),e.push(t(a,b,c));return new Promise(function(b){Promise.all(e).then(function(){b(a.embeds)})})}function v(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function w(a){try{delete window[a]}catch(b){window[a]=void 0}}function x(a){var b=document.getElementById(a);document.getElementsByTagName("head")[0].removeChild(b)}var y={};y["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},y.classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},y.createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),y.inherits=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},y.possibleConstructorReturn=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b},y.slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var z=function(){function a(b){y.classCallCheck(this,a),this.options=b||{}}return y.createClass(a,[{key:"url",value:function(a,c){var d=c.linkOptions;return'<a href="'+b(a)+'" rel="'+d.rel+'" target="'+d.target+'">'+a+"</a>"}},{key:"smiley",value:function(a,b){return' <span class="icon-emoticon" title="'+a+'">'+b+"</span> "}},{key:"emoji",value:function(a){return'<span class="emoticon emoticon-'+a+'" title=":'+a+':"></span>'}},{key:"basicAudio",value:function(a){return'<div class="ejs-audio ejs-embed"><audio src="'+a+'" controls class="video-js ejs-video-js"></audio></div>'}},{key:"soundCloud",value:function(a,b){var c=b.soundCloudOptions;return'<div class="ejs-embed">\n		<iframe height="160" scrolling="no" src="https://w.soundcloud.com/player/?url='+a+"\n		&auto_play     = "+c.autoPlay+"\n		&hide_related  = "+c.hideRelated+"\n		&show_comments = "+c.showComments+"\n		&show_user     = "+c.showUser+"\n		&show_reposts  = "+c.showReposts+"\n		&visual        = "+c.visual+"\n		&download      = "+c.download+"\n		&color         = "+c.themeColor+"\n		&theme_color   = "+c.themeColor+'"></iframe>\n		</div>'}},{key:"spotify",value:function(a){return'<div class="ejs-embed"><iframe src="https://embed.spotify.com/?uri=spotify:track:'+a+'" height="80"></iframe></div>'}},{key:"codePen",value:function(a,b){return'<div class="ejs-embed ejs-codepen"><iframe scrolling="no" height="'+b.codeEmbedHeight+'" src="'+a.replace(/\/pen\//,"/embed/")+"/?height="+b.codeEmbedHeight+'"></iframe></div>'}},{key:"ideone",value:function(a,b){return'<div class="ejs-ideone ejs-embed"><iframe src="http://ideone.com/embed/'+a.split("/")[1]+'" frameborder="0" height="'+b.codeEmbedHeight+'"></iframe></div>'}},{key:"jsBin",value:function(a,b){return'<div class="ejs-jsbin ejs-embed"><iframe height="'+b.codeEmbedHeight+'" class="jsbin-embed foo" src="http://'+a+'/embed?html,js,output"></iframe></div>'}},{key:"jsFiddle",value:function(a,b){return'<div class="ejs-embed ejs-jsfiddle"><iframe height="'+b.codeEmbedHeight+'" src="'+a+'/embedded"></iframe></div>'}},{key:"plunker",value:function(a,b){return'<div class="ejs-embed ejs-plunker"><iframe class="ne-plunker" src="http://embed.plnkr.co/'+a+'" height="'+b.codeEmbedHeight+'"></iframe></div>'}},{key:"basicImage",value:function(a){return'<div class="ejs-image ejs-embed"><div class="ne-image-wrapper"><img src="'+a+'"/></div></div>'}},{key:"flickr",value:function(a,c){return'<div class="ejs-embed"><div class="ne-image-wrapper"><iframe src="'+b(a.split("/?")[0])+'/player/" width="'+c.width+'" height="'+c.height+'"></iframe></div></div>'}},{key:"instagram",value:function(a,c){return'<div class="ejs-embed ejs-instagram"><iframe src="'+b(a.split("/?")[0])+'/embed/" height="'+c.height+'"></iframe></div>'}},{key:"slideShare",value:function(a){return'<div class="ejs-embed ejs-slideshare">'+a+"</div>"}},{key:"basicVideo",value:function(a){return'<div class="ejs-video ejs-embed"><div class="ejs-video-player"><div class="ejs-player"><video src="'+a+'" class="ejs-video-js video-js" controls></video></div></div></div>'}},{key:"dailymotion",value:function(a,b){return'<div class="ejs-video ejs-embed"><iframe src="http://www.dailymotion.com/embed/video/'+a+'" height="'+b.height+'" width="'+b.width+'"></iframe></div>'}},{key:"liveleak",value:function(a,b){return'<div class="ejs-video ejs-embed"><iframe src="http://www.liveleak.com/e/'+a.split("=")[1]+'" height="'+b.height+'" width="'+b.width+'"></iframe></div>'}},{key:"ted",value:function(a,b){return'<div class="ejs-embed ejs-ted"><iframe src="http://embed.ted.com/talks/'+a+'.html" height="'+b.height+'" width="'+b.width+'"></iframe></div>'}},{key:"ustream",value:function(a,b){return'<div class="ejs-embed ejs-ustream"><iframe src="//www.'+a.join("/")+'" height="'+b.height+'" width="'+b.width+'"></iframe></div>'}},{key:"detailsVimeo",value:function(a,b,c){return'<div class="ejs-video ejs-embed"><div class="ejs-video-preview"><div class="ejs-video-thumb" data-ejs-url="'+c+'"><div class="ejs-thumb" style="background-image:url('+a.thumbnail+')"></div><i class="fa fa-play-circle-o"></i></div><div class="ejs-video-detail"><div class="ejs-video-title"><a href="'+a.url+'">'+a.title+'</a></div><div class="ejs-video-desc">'+a.description+'</div><div class="ejs-video-stats"><span><i class="fa fa-eye"></i>'+a.views+'</span><span><i class="fa fa-heart"></i>'+a.likes+"</span></div></div></div></div>"}},{key:"detailsYoutube",value:function(a,b,c){return'<div class="ejs-video ejs-embed"><div class="ejs-video-preview"><div class="ejs-video-thumb" data-ejs-url="'+c+'"><div class="ejs-thumb" style="background-image:url('+a.thumbnail+')"></div><i class="fa fa-play-circle-o"></i></div><div class="ejs-video-detail"><div class="ejs-video-title"><a href="'+a.url+'">'+a.title+'</a></div><div class="ejs-video-desc">'+a.description+'</div><div class="ejs-video-stats"><span><i class="fa fa-eye"></i>'+a.views+'</span><span><i class="fa fa-heart"></i>'+a.likes+"</span></div></div></div></div>"}},{key:"vine",value:function(a,b){var c=b.vineOptions;return'<div class="ejs-vine"><iframe class="ejs-vine-iframe" src="https://vine.co/v/'+a+"/embed/"+c.type+'" height="'+c.height+'" width="'+c.width+'"></iframe></div>'}},{key:"vimeo",value:function(a,b){return'<div class="ejs-video-player ejs-embed"><iframe src="'+a+'" frameBorder="0" width="'+b.width+'" height="'+b.height+'"></iframe></div>'}},{key:"youtube",value:function(a,b){return'<div class="ejs-video-player ejs-embed"><iframe src="'+a+'" frameBorder="0" width="'+b.width+'" height="'+b.height+'"></iframe></div>'}},{key:"openGraph",value:function(a,b){return'<div class="ejs-embed ejs-ogp"><div class="ejs-ogp-thumb" style="background-image:url('+a.image+')"></div><div class="ejs-ogp-details"><div class="ejs-ogp-title"><a href="'+a.url+'" target="'+b.linkOptions.target+'">'+a.title+'</a></div><div class="ejs-ogb-details">'+a.description+"</div></div></div>"}},{key:"github",value:function(a,b){return'<div class="ejs-embed ejs-github"><div class="ejs-ogp-thumb" style="background-image:url('+a.owner.avatar_url+')"></div><div class="ejs-ogp-details"><div class="ejs-ogp-title"><a href="'+a.html_url+'" target="'+b.linkOptions.target+'">'+a.full_name+'</a></div><div class="ejs-ogb-details">'+a.description+'</div><div class="ejs-github-stats"><span><i class="fa fa-star"></i>'+a.stargazers_count+'</span><span><i class="fa fa-code-fork"></i>'+a.network_count+"</span></div></div></div>"}}]),a}(),A={timeout:5e3,jsonpCallback:"callback"},B=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=null!=b.timeout?b.timeout:A.timeout,d=null!=b.jsonpCallback?b.jsonpCallback:A.jsonpCallback,e=void 0;return new Promise(function(b,f){var g=v();window[g]=function(a){b({ok:!0,json:function(){return Promise.resolve(a)}}),e&&clearTimeout(e),x(d+"_"+g),w(g)},a+=-1===a.indexOf("?")?"?":"&";var h=document.createElement("script");h.setAttribute("src",a+d+"="+g),h.id=d+"_"+g,document.getElementsByTagName("head")[0].appendChild(h),e=setTimeout(function(){f(new Error("JSONP request to "+a+" timed out")),w(g),x(d+"_"+g)},c)})},C={basicAudio:/((?:https?):\/\/\S*\.(?:wav|mp3|ogg))/gi,soundCloud:/(soundcloud.com)\/[a-zA-Z0-9-_]+\/[a-zA-Z0-9-_]+/gi,spotify:/spotify.com\/track\/[a-zA-Z0-9_]+/gi,codepen:/http:\/\/codepen.io\/([A-Za-z0-9_]+)\/pen\/([A-Za-z0-9_]+)/gi,gist:/gist.github.com\/[a-zA-Z0-9_-]+\/([a-zA-Z0-9]+)/gi,highlightCode:/(`{3})(\s|[a-z]+)\s*([\s\S]*?[^`])\s*\1(?!`)/gm,inlineCode:/(`)\s*([\s\S]*?[^`])\s*\1(?!`)/gm,ideone:/ideone.com\/[a-zA-Z0-9]{6}/gi,jsbin:/jsbin.com\/[a-zA-Z0-9_]+\/[0-9_]+/gi,jsfiddle:/jsfiddle.net\/[a-zA-Z0-9_]+\/[a-zA-Z0-9_\/]+/gi,plunker:/plnkr.co\/edit\/[a-zA-Z0-9\?=]+/gi,basicImage:/((?:https?):\/\/\S*\.(?:gif|jpg|jpeg|tiff|png|svg|webp))/gi,flickr:/flickr.com\/[a-z]+\/[a-zA-Z@_$!\d\-\]+\/[\d]+/gi,instagram:/instagram.com\/p\/[a-zA-Z0-9_\/\?\-\=]+/gi,slideShare:/slideshare.net\/[a-zA-Z0-9_-]*\/[a-zA-Z0-9_-]*/gi,github:/[^gist].github.com\/([a-zA-Z0-9\.-]+)\/([a-zA-Z0-9\.-]+)/gi,basicVideo:/(?:https?):\/\/\S*\.(?:ogv|webm|mp4)/gi,dailymotion:/dailymotion.com\/video\/[a-zA-Z0-9-_]+/gi,liveleak:/liveleak.com\/view\?i=[a-zA-Z0-9_]+/gi,ted:/ted.com\/talks\/[a-zA-Z0-9_]+/gi,ustream:/ustream.tv\/[a-z\/0-9]*/gi,vimeo:/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)*/gi,vine:/vine.co\/v\/[a-zA-Z0-9]+/gi,youtube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/ytscreeningroom\?v=|\/feeds\/api\/videos\/|\/user\S*[^\w\-\s]|\S*[^\w\-\s]))([\w\-]{11})[?=&+%\w-]*/gi,gmap:/@\((.+)\)/gi,twitter:/https:\/\/twitter\.com\/\w+\/\w+\/\d+/gi};!function(){function a(a){if("string"!=typeof a&&(a=a.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function b(a){return"string"!=typeof a&&(a=a.toString()),a}function c(a){this.map={},a instanceof c?a.forEach(function(a,b){this.append(b,a)},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function d(a){return a.bodyUsed?Promise.reject(new TypeError("Already read")):void(a.bodyUsed=!0)}function e(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function f(a){var b=new FileReader;return b.readAsArrayBuffer(a),e(b)}function g(a){var b=new FileReader;return b.readAsText(a),e(b)}function h(){return this.bodyUsed=!1,this._initBody=function(a){if(this._bodyInit=a,"string"==typeof a)this._bodyText=a;else if(n.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(n.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else{if(a)throw new Error("unsupported BodyInit type");this._bodyText=""}},n.blob?(this.blob=function(){var a=d(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(f)},this.text=function(){var a=d(this);if(a)return a;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var a=d(this);return a?a:Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function i(a){var b=a.toUpperCase();return o.indexOf(b)>-1?b:a}function j(a,b){if(b=b||{},this.url=a,this.credentials=b.credentials||"omit",this.headers=new c(b.headers),this.method=i(b.method||"GET"),this.mode=b.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&b.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(b.body)}function k(a){var b=new FormData;return a.trim().split("&").forEach(function(a){if(a){var c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," ");b.append(decodeURIComponent(d),decodeURIComponent(e))}}),b}function l(a){var b=new c,d=a.getAllResponseHeaders().trim().split("\n");return d.forEach(function(a){var c=a.trim().split(":"),d=c.shift().trim(),e=c.join(":").trim();b.append(d,e)}),b}function m(a,b){b||(b={}),this._initBody(a),this.type="default",this.url=null,this.status=b.status,this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText,this.headers=b.headers instanceof c?b.headers:new c(b.headers),this.url=b.url||""}if(!self.fetch){c.prototype.append=function(c,d){c=a(c),d=b(d);var e=this.map[c];e||(e=[],this.map[c]=e),e.push(d)},c.prototype["delete"]=function(b){delete this.map[a(b)]},c.prototype.get=function(b){var c=this.map[a(b)];return c?c[0]:null},c.prototype.getAll=function(b){return this.map[a(b)]||[]},c.prototype.has=function(b){return this.map.hasOwnProperty(a(b))},c.prototype.set=function(c,d){this.map[a(c)]=[b(d)]},c.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(c){this.map[c].forEach(function(d){a.call(b,d,c,this)},this)},this)};var n={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in self},o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.call(j.prototype),h.call(m.prototype),self.Headers=c,self.Request=j,self.Response=m,self.fetch=function(a,b){var c;return c=j.prototype.isPrototypeOf(a)&&!b?a:new j(a,b),new Promise(function(a,b){function d(){return"responseURL"in e?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):void 0}var e=new XMLHttpRequest;e.onload=function(){var c=1223===e.status?204:e.status;if(100>c||c>599)return void b(new TypeError("Network request failed"));var f={status:c,statusText:e.statusText,headers:l(e),url:d()},g="response"in e?e.response:e.responseText;a(new m(g,f))},e.onerror=function(){b(new TypeError("Network request failed"))},e.open(c.method,c.url,!0),"include"===c.credentials&&(e.withCredentials=!0),"responseType"in e&&n.blob&&(e.responseType="blob"),c.headers.forEach(function(a,b){e.setRequestHeader(b,a)}),e.send("undefined"==typeof c._bodyInit?null:c._bodyInit)})},self.fetch.polyfill=!0}}();var D=function(){function a(b,c,d,e){y.classCallCheck(this,a),this.input=b,this.output=c,this.options=d,this.embeds=e,this.regex=C.twitter,this.service="twitter",this.load=this.load.bind(this),this.options.input.addEventListener("rendered",this.load,!1)}return y.createClass(a,[{key:"tweetData",value:function(a){var b=this.options.tweetOptions,c="https://api.twitter.com/1/statuses/oembed.json?omit_script=true&url="+a+"&maxwidth="+b.maxWidth+"&hide_media="+b.hideMedia+"&hide_thread="+b.hideThread+"&align="+b.align+"&lang="+b.lang;return new Promise(function(a){B(c,{credentials:"include"}).then(function(a){return a.json()}).then(function(b){return a(b)})})}},{key:"load",value:function(){var a=this;twttr.widgets.load(this.options.element),twttr.events.bind("loaded",function(){a.options.onTweetsLoad()})}},{key:"process",value:function(){var b=this;return new Promise(function(c){i(b.options,b.service)?u(b,a.urlToText).then(function(a){c([b.output,a])}):s(b,a.urlToText).then(function(a){c([a,b.embeds])})})}}],[{key:"urlToText",value:function(a,b,c){return new Promise(function(b){a.tweetData(c).then(function(a){return b(a.html)})})}}]),a}(),E=function(){function a(b,c,d,e){y.classCallCheck(this,a),this.input=b,this.output=c,this.options=d,this.embeds=e,this.regex=C.slideShare,this.service="slideshare"}return y.createClass(a,[{key:"template",value:function(a){return this.options.template.slideShare(a,this.options)}},{key:"process",value:function(){var b=this;return new Promise(function(c){i(b.options,b.service)?u(b,a.urlToText).then(function(a){c([b.output,a])}):s(b,a.urlToText).then(function(a){c([a,b.embeds])})})}}],[{key:"fetchData",value:function(a,b){var c=j(a.options),d="http://www.slideshare.net/api/oembed/2?url="+b+"&format=jsonp&maxwidth="+c.width+"&maxheight="+c.height;return new Promise(function(a){B(d,{credentials:"include"}).then(function(a){return a.json()}).then(function(b){return a(b.html)})})}},{key:"urlToText",value:function(b,c,d){return new Promise(function(c){a.fetchData(b,d).then(function(a){return c(b.template(a))})})}}]),a}(),F=function(){function a(b,c,d,e){y.classCallCheck(this,a),this.input=b,this.output=c,this.options=d,this.embeds=e,this.service="map",this.regex=C.gmap}return y.createClass(a,[{key:"process",value:function(){for(var b=this,c=void 0,d=[],e=[];null!==(c=g(this.regex,this.output));){var f="place"!==this.options.mapOptions.mode?a.getCoordinate(c[0]):Promise.resolve([null,null]);d.push(f),e.push(c)}return new Promise(function(c){e.length?Promise.all(d).then(function(f){var g=function(){var c=y.slicedToArray(f[h],2),d=c[0],g=c[1],j=a.template(e[h][0],d,g,b.options);i(b.options,b.service)?(b.embeds.push({text:j,index:e[h][0].index}),b.output=b.output.replace(b.regex,function(b){return'<span class="ejs-location">'+a.locationText(b)+"</span>"})):b.output=b.output.replace(b.regex,function(b){return'<span class="ejs-location">'+a.locationText(b)+"</span>"+j})};for(var h in d)g();c([b.output,b.embeds])}):c([b.output,b.embeds])})}}],[{key:"getCoordinate",value:function(a){var b="http://maps.googleapis.com/maps/api/geocode/json?address="+a+"&sensor=false";return new Promise(function(a){fetch(b).then(function(a){return a.json()}).then(function(b){return a([b.results[0].geometry.location.lat,b.results[0].geometry.location.lng])})})}},{key:"template",value:function(b,c,d,e){var f=a.locationText(b),g=e.mapOptions,h=j(e);return"place"===g.mode?'<div class="ejs-embed ejs-map"><iframe width="'+h.width+'" height="'+h.height+'" src="https://www.google.com/maps/embed/v1/place?key='+e.googleAuthKey+"&q="+f+'"></iframe></div>':"streetview"===g.mode?'<div class="ejs-embed ejs-map"><iframe width="'+h.width+'" height="'+h.height+'" src="https://www.google.com/maps/embed/v1/streetview?key='+e.googleAuthKey+"&location="+c+","+d+'&heading=210&pitch=10&fov=35"></iframe></div>':"view"===g.mode?'<div class="ejs-embed ejs-map"><iframe width="'+h.width+'" height="'+h.height+'" src="https://www.google.com/maps/embed/v1/view?key='+e.googleAuthKey+"&center="+c+","+d+'&zoom=18&maptype=satellite"></iframe></div>':void 0}},{key:"locationText",value:function(a){return a.split("(")[1].split(")")[0]}}]),a}(),G=function(){function a(b,c,d,e){y.classCallCheck(this,a),this.input=b,this.output=c,this.options=d,this.embeds=e,this.service="github",this.regex=C.github}return y.createClass(a,[{key:"process",value:function(){var b=this;return new Promise(function(c){i(b.options,b.service)?u(b,a.urlToText).then(function(a){c([b.output,a])}):s(b,a.urlToText).then(function(a){c([a,b.embeds])})})}}],[{key:"fetchRepo",value:function(a){var b="https://api.github.com/repos/"+a.user+"/"+a.repo;return new Promise(function(a){fetch(b).then(function(a){return a.json()}).then(function(b){return a(b)})})}},{key:"template",value:function(a,b){return b.template.github(a,b)}},{key:"urlToText",value:function(b,c,d,e){var f=e?{user:c[1],repo:c[2]}:{user:c[2],repo:c[3]};if(f.repo)return new Promise(function(c){a.fetchRepo(f).then(function(d){return c(a.template(d,b.options))})})}}]),a}(),H=function(){function b(a,c,d,e){y.classCallCheck(this,b),this.input=a,this.output=c,this.options=d,this.embeds=e,this.regex=C.vimeo,this.service="vimeo"}return y.createClass(b,[{key:"data",value:function(a){var b="https://vimeo.com/api/v2/video/"+a+".json";return new Promise(function(a){fetch(b).then(function(a){return a.json()}).then(function(b){return a(b[0])})})}},{key:"process",value:function(){var a=this;return new Promise(function(c){i(a.options,a.service)?u(a,b.urlToText).then(function(b){c([a.output,b])}):s(a,b.urlToText).then(function(b){c([b,a.embeds])})})}}],[{key:"formatData",value:function(a,b){return{title:a.title,thumbnail:a.thumbnail_medium,rawDescription:a.description.replace(/\n/g,"<br/>").replace(/&#10;/g,"<br/>"),views:a.stats_number_of_plays,likes:a.stats_number_of_likes,description:b(a.description.replace(/((<|&lt;)br\s*\/*(>|&gt;)\r\n)/g," "),150),url:a.url,id:a.id,host:"vimeo"}}},{key:"urlToText",value:function(c,d,e,f){var g=void 0;if(g=f?d[3]:c.options.link?d[0].slice(0,-4).split("/").slice(-1).pop():d[0].split("/").slice(-1).pop()){var h="https://player.vimeo.com/video/"+g;return c.options.videoDetails?new Promise(function(d){c.data(g).then(function(e){return d(o(b.formatData(e,a),e,h,c.options))})}):new Promise(function(a){return a(n(h,c.options))})}}}]),b}(),I=function(){function b(a,c,d,e){y.classCallCheck(this,b),this.input=a,this.output=c,this.options=d,this.embeds=e,this.regex=C.youtube,this.service="youtube"}return y.createClass(b,[{key:"data",value:function(a){var b="https://www.googleapis.com/youtube/v3/videos?id="+a+"&key="+this.options.googleAuthKey+"&part=snippet,statistics";return new Promise(function(a){fetch(b).then(function(a){return a.json()}).then(function(b){return a(b.items[0])})})}},{key:"process",value:function(){var a=this;return new Promise(function(c){i(a.options,a.service)?u(a,b.urlToText).then(function(b){c([a.output,b])}):s(a,b.urlToText).then(function(b){c([b,a.embeds])})})}}],[{key:"formatData",value:function(a,b){return{title:a.snippet.title,thumbnail:a.snippet.thumbnails.medium.url,rawDescription:a.snippet.description,views:a.statistics.viewCount,likes:a.statistics.likeCount,description:b(a.snippet.description,150),url:"https://www.youtube.com/watch?v="+a.id,id:a.id,host:"youtube"}}},{key:"urlToText",value:function(c,d,e,f){var g=f?d[1]:d[2],h="https://www.youtube.com/embed/"+g;return c.options.videoDetails?new Promise(function(d){c.data(g).then(function(e){return d(o(b.formatData(e,a),e,h,c.options))})}):new Promise(function(a){return a(n(h,c.options))})}}]),b}(),J=function(){function a(b,c,d,e){y.classCallCheck(this,a),this.input=b,this.output=c,this.options=d,this.embeds=e}return y.createClass(a,[{key:"process",value:function(){var a=this;if(i(this.options,this.service)){for(var b=void 0;null!==(b=g(this.regex,this.input));)if(-1===this.options.served.indexOf(b[0])){var c=this.template(b[0]);this.embeds.push({text:c,index:b.index})}}else{var d=this.options.link?new RegExp("([^>]*"+this.regex.source+")</a>","gm"):new RegExp("([^\\s]*"+this.regex.source+")","gm");this.output=this.output.replace(d,function(b){var c=a.options.link?b.slice(0,-4):b;return-1===a.options.served.indexOf(c)?(a.options.served.push(c),a.options.link?a.options.inlineText?b+a.template(b.slice(0,-4)):a.template(b.slice(0,-4))+"</a>":a.options.inlineText?b+a.template(b):a.template(b)):c})}return[this.output,this.embeds]}}]),a}(),K=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.basicImage,f.service="image",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){return this.options.template.basicImage(a,this.options)}}]),b}(J),L=function(a){function b(a,c,d,e){
y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.instagram,f.service="instagram",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){var b=j(this.options);return this.options.template.instagram(a,b,this.options)}}]),b}(J),M=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.flickr,f.service="flickr",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){var b=j(this.options);return this.options.template.flickr(a,b,this.options)}}]),b}(J),N=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.basicAudio,f.service="audio",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){return this.options.template.basicAudio(a,this.options)}}]),b}(J),O=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.spotify,f.service="spotify",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){var b=a.split("/"),c=b[b.length-1];return this.options.template.spotify(c,this.options)}}]),b}(J),P=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.soundCloud,f.service="soundcloud",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){return this.options.template.soundCloud(a,this.options)}}]),b}(J),Q=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.vine,f.service="vine",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){var b=a.split("/"),c=b[b.length-1];return this.options.template.vine(c,this.options)}}]),b}(J),R=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.basicVideo,f.service="video",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){return this.options.template.basicVideo(a,this.options)}}]),b}(J),S=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.liveleak,f.service="liveleak",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){var b=j(this.options);return this.options.template.liveLeak(a,b,this.options)}}]),b}(J),T=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.ustream,f.service="ustream",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){var b=a.split("/");b.splice(1,0,"embed");var c=j(this.options);return this.options.template.ustream(b,c,this.options)}}]),b}(J),U=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.dailymotion,f.service="dailymotion",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){var b=j(this.options),c=a.split("/"),d=c[c.length-1];return this.options.template.dailymotion(d,b,this.options)}}]),b}(J),V=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.ted,f.service="ted",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){var b=j(this.options),c=a.split("/"),d=c[c.length-1];return this.options.template.ted(d,b,this.options)}}]),b}(J),W=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.gist,f.service="gist",f.options.input.addEventListener("rendered",function(){f.load()}),f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){return'<div class="ejs-gist" data-src="'+a+'"></div>'}},{key:"load",value:function(){for(var a=this.options.input.getElementsByClassName("ejs-gist"),b=0;b<a.length;b++){var c=document.createElement("iframe");c.setAttribute("width","100%"),c.id="ejs-gist-"+b;var d=a[b];d.innerHTML="",d.appendChild(c);var e=a[b].getAttribute("data-src");e=-1===e.indexOf("http")?"https://"+e:e;var f='<html><base target="_parent"/><body onload="parent.document.getElementById(\'ejs-gist-'+b+'\').style.height=parseInt(document.body.scrollHeight)+20+\'px\'"><script type="text/javascript" src="'+e+'.js"></script></body></html>',g=c.document;c.contentDocument?g=c.contentDocument:c.contentWindow&&(g=c.contentWindow.document),g.open(),g.writeln(f),g.close()}}}]),b}(J),X=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.jsfiddle,f.service="jsfiddle",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){return a="/"==a[a.length-1]?a.slice(0,-1):a,a=-1!==a.indexOf("//")?a:"//"+a,this.options.template.jsFiddle(a,this.options)}}]),b}(J),Y=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.codepen,f.service="codepen",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){return this.options.template.codePen(a,this.options)}}]),b}(J),Z=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.jsbin,f.service="jsbin",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){return this.options.template.jsBin(a,this.options)}}]),b}(J),$=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.plunker,f.service="plunker",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){var b=a.split("?")[0].split("/"),c=b[b.length-1];return this.options.template.plunker(c,this.options)}}]),b}(J),_=function(a){function b(a,c,d,e){y.classCallCheck(this,b);var f=y.possibleConstructorReturn(this,Object.getPrototypeOf(b).call(this,a,c,d,e));return f.regex=C.ideone,f.service="ideone",f}return y.inherits(b,a),y.createClass(b,[{key:"template",value:function(a){return this.options.template.ideone(a,this.options)}}]),b}(J),aa=function(){function a(b,c){if(y.classCallCheck(this,a),!hljs)throw new ReferenceError("'hljs is not defined. HighlightJS library is needed to highlight code. Visit https://highlightjs.org/'");this.output=b,this.options=c,this.regex=C.highlightCode,this.inlineCodeRegex=C.inlineCode}return y.createClass(a,[{key:"process",value:function(){return this.output=this.output.replace(this.inlineCodeRegex,function(a,b,c){return"<code>"+c+"</code>"}),this.output.replace(this.regex,function(b,c,d,e){var f=e;f=a.trimSpace(f),f=a.encode(f),f=f.replace(/:\/\//g,"~P");var g=d.split("\n")[0],h=void 0;return g?h=hljs.highlightAuto(f,[g]):(h=hljs.highlightAuto(f),g=h.language),a.addTemplate(h,g)})}}],[{key:"encode",value:function(a){return a=a.replace(/&amp;/gm,""),a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,">")}},{key:"trimSpace",value:function(a){return a=a.replace(/^([ \t]*)/g,""),a=a.replace(/[ \t]*$/g,"")}},{key:"addTemplate",value:function(a,b){return'<pre><code class="ejs-code hljs '+b+'">'+a.value+"</code></pre>"}}]),a}(),ba=function(){function a(b,c){y.classCallCheck(this,a),this.input=" "+b+" ",this.options=c;var e=[{text:" :) ",code:"&#xe60a"},{text:" :D ",code:"&#xe608"},{text:" :d ",code:"&#xe608"},{text:" :( ",code:"&#xe60e"},{text:" :/ ",code:"&#xe620"},{text:" :P ",code:"&#xe60c"},{text:" :p ",code:"&#xe60c"},{text:" 3:) ",code:"&#xe618"},{text:" (^) ",code:"&#xe607"},{text:" ;) ",code:"&#xe610"},{text:" :o ",code:"&#xe61a"},{text:" -_- ",code:"&#xe61e"},{text:" (y) ",code:"&#xe606"},{text:" :* ",code:"&#xe604"},{text:" &lt;3 ",code:"&#xe604"},{text:" <3 ",code:"&#xe604"},{text:" &lt;/3 ",code:"&#xe605"},{text:" </3 ",code:"&#xe605"},{text:" ^_^ ",code:"&#xe612"},{text:" 8-) ",code:"&#xe614"},{text:" 8| ",code:"&#xe614"},{text:" :S ",code:"&#xe61c"},{text:" :s ",code:"&#xe61c"}];this.icons=c.customFontIcons.length?c.customFontIcons:e,this.escapedSymbols=this.icons.map(function(a){return d(a.text)}),this.smileyRegex=new RegExp("("+this.escapedSymbols.join("|")+")","g")}return y.createClass(a,[{key:"process",value:function(){var a=this,b=this.input.replace(this.smileyRegex,function(b,c){var e=a.escapedSymbols.indexOf(d(c)),f=a.icons[e].code;return a.options.template.smiley(c,f,a.options)});return b.substring(1,b.length-1)}}]),a}(),ca=function(){function a(b,c){y.classCallCheck(this,a),this.output=b,this.options=c,this.emojiList=["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","winky_face","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","wow","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","\\+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface","sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel","bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn","house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","themoreyouknow","tmyk","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de","one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_square","white_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"],this.allEmojiList=this.emojiList.concat(this.options.customEmoji),this.emojiRegex=new RegExp(":("+this.allEmojiList.join("|")+"):","g")}return y.createClass(a,[{key:"process",value:function(){var a=this;return this.output.replace(this.emojiRegex,function(b,c){return a.options.template.emoji(c,a.options)})}}]),a}(),da=function(){function a(b,c){if(y.classCallCheck(this,a),!window.marked)throw new ReferenceError("marked.js is not loaded.");this.output=b,this.options=c}return y.createClass(a,[{key:"process",value:function(){var a=this,b=new marked.Renderer;return b.code=function(a){var b=window.hljs?hljs.highlightAuto(a):{value:a},c=window.hljs?b.language:"";return'<pre><code class="ejs-code hljs '+c+'">'+b.value+"</code></pre>"},b.link=function(b,c,d){return-1===b.indexOf("&lt;/a")?b:b.match(/&gt;(.+)&lt;\/a/gi)?(c||(c=""),'<a href="'+RegExp.$1+'" rel='+a.options.linkOptions.rel+'" target="'+a.options.linkOptions.target+'" title="'+c+'">'+d+"</a>"):void 0},b.image=function(a,b,c){return-1===a.indexOf("&lt;/a")?a:a.match(/&gt;(.+)&lt;\/a/gi)?(b||(b=""),'<div class="ejs-image ejs-embed"><div class="ne-image-wrapper"><img src="'+RegExp.$1+'" title="'+b+'" alt="'+c+'"/></div></div>'):void 0},b.paragraph=function(a){return"<p> "+a+" </p>"},marked.Lexer.rules.gfm.heading=marked.Lexer.rules.normal.heading,marked.Lexer.rules.tables.heading=marked.Lexer.rules.normal.heading,this.options.markedOptions.renderer=b,marked(this.output,this.options.markedOptions)}}]),a}(),ea=function(){function a(b,c,d,e){y.classCallCheck(this,a),this.input=b,this.output=c,this.options=d,this.embeds=e,this.service="opengraph",this.regex=l(),this.excludeRegex=new RegExp([".mp4|.mp3|.gif|.pdf|.doc|.ppt|.docx|.jpg|.jpeg|.ogg"].concat(d.openGraphExclude).join("|"),"gi")}return y.createClass(a,[{key:"template",value:function(a){return this.options.template.openGraph(a,this.options)}},{key:"process",value:function(){var b=this;return new Promise(function(c){i(b.options,b.service)?u(b,a.urlToText).then(function(a){return c([b.output,a])}):s(b,a.urlToText).then(function(a){return c([a,b.embeds])})})}}],[{key:"fetchData",value:function(a,b){a=encodeURIComponent(a);var c=new Function("url","return `"+b.options.openGraphEndpoint+"`")(a);return new Promise(function(a){fetch(c).then(function(a){return a.json()}).then(function(c){return a(b.options.onOpenGraphFetch(c)||c)})})}},{key:"urlToText",value:function(b,c,d){return d.match(b.excludeRegex)?new Promise(function(c){a.fetchData(d,b).then(function(a){return c(a&&a.success?b.template(a):null)})}):void 0}}]),a}(),fa=function(){function a(b,c){y.classCallCheck(this,a),this.input=b,this.options=c,this.urlRegex=l()}return y.createClass(a,[{key:"process",value:function(){var a=this,b=this.options.linkOptions;return this.input.replace(this.urlRegex,function(c){var d=c.split(".")[c.split(".").length-1];return"/"==c[c.length-1]&&(c=c.slice(0,-1)),-1===b.exclude.indexOf(d)?a.options.template.url(c,a.options):c})}}]),a}(),ga={},ha={marked:!1,markedOptions:{},link:!0,linkOptions:{target:"self",exclude:["pdf"],rel:""},emoji:!0,customEmoji:[],fontIcons:!0,customFontIcons:[],highlightCode:!1,videoJS:!1,videojsOptions:{fluid:!0,preload:"metadata"},locationEmbed:!0,mapOptions:{mode:"place"},tweetsEmbed:!1,tweetOptions:{maxWidth:550,hideMedia:!1,hideThread:!1,align:"none",lang:"en"},openGraphEndpoint:null,openGraphExclude:[],videoEmbed:!0,videoHeight:null,videoWidth:null,videoDetails:!0,audioEmbed:!0,excludeEmbed:[],inlineEmbed:[],inlineText:!0,codeEmbedHeight:500,vineOptions:{maxWidth:null,type:"postcard",responsive:!0,width:350,height:460},googleAuthKey:"",soundCloudOptions:{height:160,themeColor:"f50000",autoPlay:!1,hideRelated:!1,showComments:!0,showUser:!0,showReposts:!1,visual:!1,download:!1},videoClickClass:"ejs-video-thumb",customVideoClickHandler:!1,beforeEmbedJSApply:function(){},afterEmbedJSApply:function(){},onVideoShow:function(){},onTweetsLoad:function(){},videojsCallback:function(){},onOpenGraphFetch:function(){},onOpenGraphFail:function(){},videoClickHandler:function(){},served:[]},ia=[],ja=[],ka=[],la=function(){function a(b,d){y.classCallCheck(this,a);var e=k(ha),f=k(ga),g=c(e,f);if(this.options=c(g,b),this.options.template=d||new z,!this.options.input||"string"!=typeof this.options.input&&"object"!==y["typeof"](this.options.input))throw ReferenceError("You need to pass an element or the string that needs to be processed");this.input="object"===y["typeof"](this.options.input)?this.options.input.innerHTML:this.options.input}return y.createClass(a,[{key:"process",value:function(){var a=this,b=this.input,c=this.options,d=[],e="";return this.options.beforeEmbedJSApply(),new Promise(function(g){c.link&&(e=new fa(b,c).process());var i=c.openGraphEndpoint?new ea(b,e,c,d).process():Promise.resolve([e,d]);i.then(function(a){var d=y.slicedToArray(a,2),e=d[0],f=d[1];if(c.marked&&(e=new da(e,c).process()),c.emoji&&(e=new ca(e,c).process()),c.fontIcons&&(e=new ba(e,c).process()),c.highlightCode&&!c.marked&&(e=new aa(e,c).process()),h(c,"ideone")){var g=new _(b,e,c,f).process(),i=y.slicedToArray(g,2);e=i[0],f=i[1]}if(h(c,"plunker")){var j=new $(b,e,c,f).process(),k=y.slicedToArray(j,2);e=k[0],f=k[1]}if(h(c,"jsbin")){var l=new Z(b,e,c,f).process(),m=y.slicedToArray(l,2);e=m[0],f=m[1]}if(h(c,"codepen")){var n=new Y(b,e,c,f).process(),o=y.slicedToArray(n,2);e=o[0],f=o[1]}if(h(c,"jsfiddle")){var p=new X(b,e,c,f).process(),q=y.slicedToArray(p,2);e=q[0],f=q[1]}if(h(c,"gist")){var r=new W(b,e,c,f).process(),s=y.slicedToArray(r,2);e=s[0],f=s[1]}if(h(c,"ted")){var t=new V(b,e,c,f).process(),u=y.slicedToArray(t,2);e=u[0],f=u[1]}if(h(c,"dailymotion")){var v=new U(b,e,c,f).process(),w=y.slicedToArray(v,2);e=w[0],f=w[1]}if(h(c,"ustream")){var x=new T(b,e,c,f).process(),z=y.slicedToArray(x,2);e=z[0],f=z[1]}if(h(c,"liveleak")){var A=new S(b,e,c,f).process(),B=y.slicedToArray(A,2);e=B[0],f=B[1]}if(c.videoEmbed){var C=new R(b,e,c,f).process(),D=y.slicedToArray(C,2);e=D[0],f=D[1]}if(h(c,"vine")){var E=new Q(b,e,c,f).process(),F=y.slicedToArray(E,2);e=F[0],f=F[1]}if(h(c,"soundcloud")){var G=new P(b,e,c,f).process(),H=y.slicedToArray(G,2);e=H[0],f=H[1]}if(h(c,"spotify")){var J=new O(b,e,c,f).process(),ea=y.slicedToArray(J,2);e=ea[0],f=ea[1]}if(c.audioEmbed){var fa=new N(b,e,c,f).process(),ga=y.slicedToArray(fa,2);e=ga[0],f=ga[1]}if(h(c,"flickr")){var ha=new M(b,e,c,f).process(),ia=y.slicedToArray(ha,2);e=ia[0],f=ia[1]}if(h(c,"instagram")){var ja=new L(b,e,c,f).process(),ka=y.slicedToArray(ja,2);e=ka[0],f=ka[1]}if(c.imageEmbed){var la=new K(b,e,c,f).process(),ma=y.slicedToArray(la,2);e=ma[0],f=ma[1]}return h(c,"youtube")?new I(b,e,c,f).process():Promise.resolve([e,f])}).then(function(a){var d=y.slicedToArray(a,2),e=d[0],f=d[1];return h(c,"vimeo")?new H(b,e,c,f).process():Promise.resolve([e,f])}).then(function(a){var d=y.slicedToArray(a,2),e=d[0],f=d[1];return h(c,"opengraph")?new G(b,e,c,f).process():Promise.resolve([e,f])}).then(function(a){var d=y.slicedToArray(a,2),e=d[0],f=d[1];return c.locationEmbed?new F(b,e,c,f).process():Promise.resolve([e,f])}).then(function(a){var d=y.slicedToArray(a,2),e=d[0],f=d[1];return h(c,"slideshare")?new E(b,e,c,f).process():Promise.resolve([e,f])}).then(function(d){var e=y.slicedToArray(d,2),f=e[0],g=e[1];return c.tweetsEmbed?(a.twitter=new D(b,f,c,g),a.twitter.process()):Promise.resolve([f,g])}).then(function(b){var d=y.slicedToArray(b,2),e=d[0],h=d[1];a.data={input:c.input,output:e,options:c,inputString:a.input,services:c.served,template:c.template},g(f(e,h))})})}},{key:"render",value:function(){var a=this;if("string"==typeof this.options.input)throw new Error("You cannot call render method for a string");if(!this.options.input)throw new Error("You didn't pass an element while creating this instance. render() method can't work without an input element");return new Promise(function(b){a.process().then(function(c){a.options.input.innerHTML=c,a.applyListeners(),b(a.data)})})}},{key:"applyListeners",value:function(){p(this.options),m(this.options);var a =new Event("rendered");this.options.input.dispatchEvent(a),this.options.afterEmbedJSApply()}},{key:"update",value:function(a, b){if(a&&(this.options=c(this.options,a)),b&&(this.options.template=b),!this.options.input||"string"!=typeof this.options.input&&"object"!==y["typeof"](this.options.input))throw ReferenceError("You need to pass an element or the string that needs to be processed");this.input ="object"===y["typeof"](this.options.input)?this.options.input.innerHTML:this.options.input}},{key:"text",value:function(){var a=this;return new Promise(function(b){a.process().then(function(){b(a.data)})})}},{key:"destroy",value:function(){if(!this.element)throw new Error("destroy() method only if an element had been passed in the options object");q("ejs-video-thumb"),this.element.removeEventListener("rendered",this.twitter.load(),!1),this.element.innerHTML=this.input}}],[{key:"setOptions",value:function(a){ga=c(ha,a)}},{key:"applyEmbedJS",value:function(b){for(var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],d=arguments.length<=2||void 0===arguments[2]?new z:arguments[2],e=document.querySelectorAll(b),f=0;f<e.length;f++)c.input=e[f],ia[f]=new a(c,d),ka[f]=ia[f].render();return new Promise(function(a){Promise.all(ka).then(function(b){a(b)})})}},{key:"destroyEmbedJS",value:function(){for(var a=0;a<ia.length;a++)ia[a].destroy()}},{key:"destroyAll",value:function(){for(var a=0;a<ja.length;a++)ja[a].destroy()}},{key:"Template",value:function(){return new z}}]),a}();return la});
